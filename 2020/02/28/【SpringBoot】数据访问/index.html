<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="dao层简介 JDBC   JDBC（Java DataBase Connectivity ，java数据库连接技术）是数据库的统一接口标准，是java连接数据库操作的原生接口。 JDBC对Java程序员而言是API，对实现与数据库连接的服务提供商而言是接口模型。作为API，JDBC为程序开发提供标准的接口，并为各个数据库厂商及第三方中间件厂商实现与数据库的连接提供了标准方法。 一句话概括：jdb">
<meta property="og:type" content="article">
<meta property="og:title" content="【SpringBoot】数据访问">
<meta property="og:url" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/index.html">
<meta property="og:site_name" content="Cymbym">
<meta property="og:description" content="dao层简介 JDBC   JDBC（Java DataBase Connectivity ，java数据库连接技术）是数据库的统一接口标准，是java连接数据库操作的原生接口。 JDBC对Java程序员而言是API，对实现与数据库连接的服务提供商而言是接口模型。作为API，JDBC为程序开发提供标准的接口，并为各个数据库厂商及第三方中间件厂商实现与数据库的连接提供了标准方法。 一句话概括：jdb">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-0.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-1.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-2.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-3.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-4.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-5.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-6.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-7.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-9.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-10.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-11.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-12.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-13.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-14.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-15.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-16.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-17.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-18.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-19.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-20.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-22.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-21.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-23.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-24.png">
<meta property="og:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-25.png">
<meta property="article:published_time" content="2020-02-28T03:17:00.000Z">
<meta property="article:modified_time" content="2020-03-07T16:19:41.206Z">
<meta property="article:author" content="Xinbin Shen">
<meta property="article:tag" content="Spring Boot">
<meta property="article:tag" content="Dao层">
<meta property="article:tag" content="JDBC">
<meta property="article:tag" content="ORM">
<meta property="article:tag" content="JPA">
<meta property="article:tag" content="Hibernate">
<meta property="article:tag" content="Mybatis">
<meta property="article:tag" content="Spring Boot JPA">
<meta property="article:tag" content="Druid">
<meta property="article:tag" content="Centos">
<meta property="article:tag" content="Docker">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="VirtualBox">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-0.png">

<link rel="canonical" href="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>【SpringBoot】数据访问 | Cymbym</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Cymbym</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="Searching..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Xinbin Shen">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cymbym">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【SpringBoot】数据访问
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-02-28 11:17:00" itemprop="dateCreated datePublished" datetime="2020-02-28T11:17:00+08:00">2020-02-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-08 00:19:41" itemprop="dateModified" datetime="2020-03-08T00:19:41+08:00">2020-03-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring-Boot/" itemprop="url" rel="index">
                    <span itemprop="name">Spring Boot</span>
                  </a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring-Boot/Dao%E5%B1%82/" itemprop="url" rel="index">
                    <span itemprop="name">Dao层</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="dao层简介"><a href="#dao层简介" class="headerlink" title="dao层简介"></a>dao层简介</h1><ul>
<li><strong>JDBC</strong>  <ul>
<li>JDBC（Java DataBase Connectivity ，java数据库连接技术）是<font color="#FF0000">数据库的统一接口标准</font>，是java连接数据库操作的原生接口。</li>
<li>JDBC对Java程序员而言是<font color="#FF0000">API</font>，对实现与数据库连接的服务提供商而言是<font color="#FF0000">接口模型</font>。作为API，JDBC为程序开发提供标准的接口，并为各个数据库厂商及第三方中间件厂商<font color="#FF0000">实现与数据库的连接</font>提供了标准方法。</li>
<li>一句话概括：jdbc是<font color="#FF0000">所有框架操作数据库</font>都必须要用的，由数据库厂商提供，但是为了方便java程序员调用各个数据库，各个数据库厂商都要实现jdbc接口用来访问各种数据库 。<a id="more"></a>  </li>
</ul>
</li>
<li><strong>ORM</strong>  <ul>
<li>ORM（Object Relational Mapping，对象关系映射）是<font color="#FF0000">数据库的表</font>和<font color="#FF0000">POJO</font>（Plain Ordinary Java Object，简单Java对象）的映射关系模型。</li>
<li>我们通过这层映射关系就可以简单迅速地把<font color="#FF0000">数据库的表的数据</font>转化为<font color="#FF0000">POJO</font>。</li>
<li>取代了JDBC，所有的ORM模型<font color="#FF0000">都是基于JDBC</font>进行封装的，不同ORM模型（Hibernate、Spring Data JPA、open JPA）对JDBC封装的强度是不一样的。</li>
<li>ORM是一种思想，是插入在<font color="#FF0000">应用程序</font>与<font color="#FF0000">JDBC API</font>之间的一个中间层，JDBC并不能很好地支持面向对象的程序设计，ORM解决了这个问题，通过JDBC将字段高效的与对象进行映射。即与<font color="#FF0000">应用程序 - ORM - JDBC - 数据库</font>。</li>
</ul>
</li>
<li><strong>JPA</strong><ul>
<li>JPA（JAVA Persistence API，持久规范）是一套基于ORM对象关系型数据库映射的规范。内部是由一系列的<font color="#FF0000">接口和抽象类</font>构成。不用写sql语句，面向对象的。</li>
<li>JPA 通过注解描述<font color="#FF0000">对象－关系表</font>的映射关系，并将运行期的实体对象持久化到数据库中。</li>
<li>JPA 规范本质上就是一种基于ORM的规范，注意不是ORM框架——因为JPA<font color="#FF0000">并未提供 ORM 实现</font>，它只是制订了一些规范，提供了一些编程的 API 接口，但具体实现则由服务厂商来提供实现，如Hibernate、TopLink、open JPA。其关系与<font color="#FF0000">应用程序 - JPA规范 - Hibernate等（JPA实现） - 数据库</font>。</li>
</ul>
</li>
<li><strong>Hibernate</strong>   <ul>
<li>Hibernate是一种<font color="#FF0000">全自动的ORM框架</font>，只需提供<font color="#FF0000">POJO和映射关系</font>；也是一种<font color="#FF0000">JPA实现</font>，依照的JPA规范。</li>
<li>Hibernate对JDBC进行了非常轻量级的对象封装，是建立在<font color="#FF0000">POJO</font>和<font color="#FF0000">数据库表模型</font>的直接映射关系上的。</li>
<li>Hibernate 可以自动生成 SQL 语句，自动执行，可以直接使用对象编程思维来操纵数据库。</li>
<li>只适用于场景不太复杂，要求性能不太苛刻的时候。</li>
</ul>
</li>
<li><strong>Mybatis</strong>  <ul>
<li>Mybatis是一种<font color="#FF0000">半自动映射的框架，</font>需要手动匹配提供<font color="#FF0000">POJO、SQL和映射关系</font>。不是依照的JPA规范。</li>
<li>Mybatis拥有动态列，动态表名，存储过程支持，同时提供了简易的缓存、日志、级联。</li>
<li>Mybatis是一个java持久层框架，它封装少、高性能·可优化、维护简单等优点成为了目前java移动互联网网站服务的首选持久层框架，它特别适合分布式和大数据网络数据库编程。</li>
</ul>
</li>
<li><strong>Spring Boot JPA</strong>   <ul>
<li>Spring Boot JPA是Spring提供的一套简化JPA开发的框架，按照约定好的【方法命名规则】写<font color="#FF0000">Dao层接口</font>，就可以在<font color="#FF0000">只声明接口、不写接口实现</font>的情况下，实现对数据库的访问和操作。</li>
<li>同时提供了很多除了CRUD之外的功能，如分页、排序、复杂查询等等。</li>
<li>Spring Boot JPA是对JPA规范的再次抽象，底层还是用的实现JPA的Hibernate技术。即<font color="#FF0000">应用程序 - JPA规范 - Spring Boot JPA框架 - Hibernate框架（JPA实现） - 数据库</font>。</li>
</ul>
</li>
<li><strong>JDBC开发步骤（了解）</strong>  <ul>
<li>配置jdbc：连接数据库，注册驱动和数据库信息</li>
<li>操作Connection，打开Statement对象</li>
<li>通过Statement对象执行SQL，返回结果到ResultSet对象</li>
<li>使用ResultSet读取数据，然后通过代码转化为具体的POJO对象</li>
<li>关闭数据库相关的资源</li>
</ul>
</li>
<li><strong>JDBC Template开发步骤（掌握）</strong>  <ul>
<li>配置jdbc：连接数据库，注册驱动和数据库信息</li>
<li><font color="#FF0000">@Autowired装配JdbcTemplate</font>：使其传入连接池对象</li>
<li>提供SQL语句和占位符的值，<font color="#FF0000">调用 execute()执行 DDL、update()执行 DML、queryXxx()执行DQL</font>等方法，得到封装好的查询结果集</li>
</ul>
</li>
<li><strong>Hibernate开发步骤（了解）</strong><br>Hibernate是将数据库中的数据表映射为持久层的Java对象</li>
<li><strong>Mybatis开发步骤（掌握）</strong>  <ul>
<li>配置jdbc：连接数据库，注册驱动和数据库信息</li>
<li>创建Java bean实体类</li>
<li>开发mapper接口（相当于Dao接口）</li>
<li><font color="#FF0000">使用配置文件或者注解，将sql语句中的输入参数和输出参数映射为Java bean对象</font></li>
</ul>
</li>
<li><strong>Spring Boot JPA开发步骤（掌握）</strong>  <ul>
<li>配置jdbc：连接数据库，注册驱动和数据库信息</li>
<li><font color="#FF0000">创建Java bean实体类，配置bean和数据表的映射</font></li>
<li>利用Spring Data JPA的Dao的接口编写规则<font color="#FF0000">声明接口</font></li>
<li>配置JPA</li>
</ul>
</li>
</ul>
<h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><h2 id="配置JDBC获取数据源"><a href="#配置JDBC获取数据源" class="headerlink" title="配置JDBC获取数据源"></a>配置JDBC获取数据源</h2><ul>
<li><strong>前期准备</strong><ul>
<li>先到 <a href="https://www.virtualbox.org/" target="_blank" rel="noopener">VirtualBox官网</a>安装虚拟机，导入<a href="https://www.jianshu.com/p/e13ee0e3b0a7" target="_blank" rel="noopener">.OVA文件的centos</a>，安装与VirtualBox版本对应的<a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener">Oracle VM VirtualBox Extension Pack</a> 。如果别人的centos密码未知，可<a href="https://www.cnblogs.com/jfaith/p/12145494.html" target="_blank" rel="noopener">自行修改密码</a>。</li>
<li>为了方便可以设置好虚拟机网络后，可利用虚拟机的ip地址在客户端SmarTTY与服务器进行交互。</li>
<li>检查好内核版本后，安装Docker。如果遇到linux的内核中的SELinux不支持 overlay2 graph driver，导致Docker启动不了，可<a href="https://www.jianshu.com/p/220ba71aeddb" target="_blank" rel="noopener">在Docker里禁用selinux</a>。 - 安装MySQL镜像，根据镜像启动容器，做端口映射。</li>
<li>下载安装 <a href="https://blog.csdn.net/qq1147093833/article/details/80624667?depth_1-utm_source=distribute.pc_relevant.none-task&utm_source=distribute.pc_relevant.none-task" target="_blank" rel="noopener">Navicat Premium 12</a> 访问MySQL。</li>
</ul>
</li>
</ul>
<ul>
<li><strong>配置JDBC</strong>  <ul>
<li>基于Spring Initializr创建项目，加入Web、JDBC、MySQL等依赖。   <img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-0.png" class>  </li>
<li>在MySQL中3306端口的镜像下，新建一个数据库jdbc：  <img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-1.png" class>  </li>
<li>在配置文件<code>application.yml</code>中写入要连接的数据库：<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.1.100:3306/jdbc?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">initialization-mode:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure></li>
<li>在测试类中写入：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpringBoot07DataJdbcApplicationTests</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//class com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">        System.out.println(dataSource.getClass());</span><br><span class="line">        Connection connection = dataSource.getConnection();</span><br><span class="line">        <span class="comment">//HikariProxyConnection@865430810 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e1ddc90</span></span><br><span class="line">        System.out.println(connection);</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-2.png" class>   </li>
<li>可以得到数据源为：<code>class com.zaxxer.hikari.HikariDataSource</code>，数据源的连接池为：<code>HikariProxyConnection@865430810 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e1ddc90</code>。</li>
</ul>
</li>
</ul>
<h2 id="源码：JDBC自动配置原理"><a href="#源码：JDBC自动配置原理" class="headerlink" title="源码：JDBC自动配置原理"></a>源码：JDBC自动配置原理</h2><p>在<code>External libraries</code>找到Spring Boot的自动配置依赖，在<code>org.springframework.boot.autoconfigure</code>下找到<code>jdbc</code>。其中的<code>DataSourceConfiguration</code>，<code>DataSourceInitializerInvoker</code>，<code>JdbcTemplateAutoConfiguration</code>和<code>JdbcTemplateConfiguration</code>需要关注。</p>
<ul>
<li><strong><font color="#FF0000">DataSourceConfiguration</font>：数据源的【自动配置/手动自定义】</strong><br>参考<code>DataSourceConfiguration</code>，根据配置创建数据源，故可以在配置文件<code>application.yml</code>中利用<br><code>spring.datasource.type</code>指定自定义的数据源类型:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>(</span><br><span class="line">    proxyBeanMethods = <span class="keyword">false</span></span><br><span class="line">)</span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span>(&#123;DataSource<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">ConditionalOnProperty</span>(</span></span><br><span class="line"><span class="class">    <span class="title">name</span> </span>= &#123;<span class="string">"spring.datasource.type"</span>&#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Generic</span> </span>&#123;</span><br><span class="line">    Generic() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">DataSource <span class="title">dataSource</span><span class="params">(DataSourceProperties properties)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> properties.initializeDataSourceBuilder().build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
此外，追溯<code>DataSourceProperties</code>类的<code>initializeDataSourceBuilder</code>方法，其返回值为<code>DataSourceBuilder</code>对象。<br>在<code>DataSourceBuilder</code>类中，定义了一个静态常量<code>private static final String[] DATA_SOURCE_TYPE_NAMES = new String[]{&quot;com.zaxxer.hikari.HikariDataSource&quot;, &quot;org.apache.tomcat.jdbc.pool.DataSource&quot;, &quot;org.apache.commons.dbcp2.BasicDataSource&quot;};</code>。<br>由此可知默认是用<code>com.zaxxer.hikari.HikariDataSource</code>作为数据源的。</li>
<li><strong><font color="#FF0000">DataSourceInitializerInvoker</font>：SpringBoot2通过jdbc【创建/初始化】数据表</strong><br><code>DataSourceInitializerInvoker</code><br>是一个实现了<code>ApplicationListener</code>和<code>InitializingBean</code>两个接口的类，多次使用了<code>DataSourceInitializer</code>的对象。<br>在<code>DataSourceInitializer</code>类中，存在<code>createSchema</code>和<code>initSchema</code>方法，分别用于建表和插入数据。二者都用到了<code>getScripts</code>和<code>runScripts</code>方法，且两个方法都传入了配置文件中的参数<code>propertyName：&quot;spring.datasource.schema&quot;</code>，故<font color="#FF0000">可以在配置文件<code>application.yml</code>中声明参数<code>&quot;spring.datasource.schema&quot;</code>【方法一】</font>，随后放在资源文件夹中即可使创建表单/插入数据的资源文件生效。 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> List&lt;Resource&gt; <span class="title">getScripts</span><span class="params">(String propertyName, List&lt;String&gt; resources, String fallback)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (resources != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getResources(propertyName, resources, <span class="keyword">true</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        String platform = <span class="keyword">this</span>.properties.getPlatform();</span><br><span class="line">        List&lt;String&gt; fallbackResources = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        fallbackResources.add(<span class="string">"classpath*:"</span> + fallback + <span class="string">"-"</span> + platform + <span class="string">".sql"</span>);</span><br><span class="line">        fallbackResources.add(<span class="string">"classpath*:"</span> + fallback + <span class="string">".sql"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getResources(propertyName, fallbackResources, <span class="keyword">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
可见获取<code>Scripts</code>的资源文件除了在配置文件中定义，<font color="#FF0000">还可以将其命名为<code>&quot;classpath*:&quot; + fallback + &quot;-&quot; + platform + &quot;.sql&quot;</code>或者<code>&quot;classpath*:&quot; + fallback + &quot;.sql&quot;</code>【方法二】</font>，随后放在资源文件夹中即可使创建表单/插入数据的资源文件生效。<br>其中<code>platform</code>为字符串<code>&quot;all&quot;</code>。<code>fallback</code>在在创建Schema时，即在<code>getSchema()</code>方法中为<code>schema</code>；在初始化Schema（插入数据）时，即<code>initSchema()</code>方法中为<code>data</code>。<br>因此，只需要在类路径下，建立<code>xxx-all.sql</code>或者<code>xxx.sql</code>，即可在对应的数据库中，找到新建的表。如图，成功建立表：  <img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-3.png" class>  

</li>
</ul>
<h2 id="利用JdbcTemplate操作数据库"><a href="#利用JdbcTemplate操作数据库" class="headerlink" title="利用JdbcTemplate操作数据库"></a>利用JdbcTemplate操作数据库</h2><p>利用<code>JdbcTemplateAutoConfiguration</code>和<code>JdbcTemplateConfiguration</code>自动配置了JdbcTemplate来操作数据库。<br>新建一个<code>HelloController</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/query"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">map</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        List&lt;Map&lt;String, Object&gt;&gt; list = jdbcTemplate.queryForList(<span class="string">"select * FROM person"</span>);</span><br><span class="line">        <span class="keyword">return</span> list.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时访问 <a href="http://localhost:8081/query" target="_blank" rel="noopener">http://localhost:8081/query</a> ，可以获取到表<code>person</code>的第一个数据：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-4.png" class>  

<h1 id="整合Druid数据源"><a href="#整合Druid数据源" class="headerlink" title="整合Druid数据源"></a>整合Druid数据源</h1><h2 id="导入Druid数据源"><a href="#导入Druid数据源" class="headerlink" title="导入Druid数据源"></a>导入Druid数据源</h2><p>从<a href="https://mvnrepository.com/" target="_blank" rel="noopener">Maven Repository</a>，将druid的依赖添加到<code>pom.xml</code>中，并在<code>application.yml</code>中配置druid数据源：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br></pre></td></tr></table></figure>
<p>随后可以在测试类中查看是否引入成功:  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-5.png" class>   
<p>数据源为<code>class com.alibaba.druid.pool.DruidDataSource</code>，对应的连接池为<code>com.mysql.cj.jdbc.ConnectionImpl@2b2f5fcf</code>。</p>
<h2 id="绑定Druid数据源配置"><a href="#绑定Druid数据源配置" class="headerlink" title="绑定Druid数据源配置"></a>绑定Druid数据源配置</h2><p>在<code>application.yml</code>中写入：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line"><span class="comment">#   数据源基本配置</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.1.100:3306/jdbc?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">initialization-mode:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="comment">#   数据源其他配置（黄色是因为不在数据库中，因此不能绑定到配置里）</span></span><br><span class="line">    <span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">minIdle:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line">    <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">    <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">poolPreparedStatements:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment">#   配置监控统计拦截的filters，去掉后监控界面sql无法统计，'wall'用于防火墙</span></span><br><span class="line">    <span class="attr">filters:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line"><span class="comment">#    filters: stat,wall,slf4j</span></span><br><span class="line">    <span class="attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">useGlobalDataSourceStat:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">connectionProperties:</span> <span class="string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></span><br></pre></td></tr></table></figure>
<p>此时其他配置在<code>DataSourceProperties.java</code>中并不存在，因此无法绑定，需要在<code>/config</code>文件夹下写一个配置类<code>DruidConfig.java</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.datasource"</span>)</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">druid</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此外还需要在<code>pom.xml</code>引入<code>log4j</code>。<br>此时，可以在测试类的连接池中进行debug，查看属性配置是否成功。  </p>
<h2 id="配置Druid的监控"><a href="#配置Druid的监控" class="headerlink" title="配置Druid的监控"></a>配置Druid的监控</h2><p>在<code>DruidConfig.java</code>中配置一个管理后台的Servlet和一个web监控的filter，并将二者注册到容器bean中，</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//配置Druid的监控</span></span><br><span class="line"><span class="comment">//1、配置一个管理后台的Servlet，访问地址localhost:8081/druid</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">statViewServlet</span><span class="params">()</span></span>&#123;</span><br><span class="line">	  <span class="comment">//把StatViewServlet()注册到bean，并处理"/druid/*"的所有请求</span></span><br><span class="line">    ServletRegistrationBean bean = <span class="keyword">new</span> ServletRegistrationBean(<span class="keyword">new</span> StatViewServlet(), <span class="string">"/druid/*"</span>);</span><br><span class="line">    Map&lt;String, String&gt; initParams = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    initParams.put(<span class="string">"loginUsername"</span>,<span class="string">"admin"</span>);</span><br><span class="line">    initParams.put(<span class="string">"loginPassword"</span>,<span class="string">"123"</span>);</span><br><span class="line">    initParams.put(<span class="string">"allow"</span>,<span class="string">""</span>);<span class="comment">//默认就是允许所有访问</span></span><br><span class="line">    initParams.put(<span class="string">"deny"</span>,<span class="string">"192.168.10.100"</span>);</span><br><span class="line">    bean.setInitParameters(initParams);</span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2、配置一个web监控的filter，任何请求都需要通过filter实现监控，除了静态资源*.js,*.css，登录请求/druid/*</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">webStatFilter</span><span class="params">()</span></span>&#123;</span><br><span class="line">    FilterRegistrationBean bean = <span class="keyword">new</span> FilterRegistrationBean();</span><br><span class="line">    <span class="comment">// 注册WebStatFilter()实例	</span></span><br><span class="line">    bean.setFilter(<span class="keyword">new</span> WebStatFilter());</span><br><span class="line">    Map&lt;String, String&gt; initParams = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">// 设置初始化参数，拦截除了"*.js,*.css,/druid/*"的所有请求</span></span><br><span class="line">    initParams.put(<span class="string">"exclusions"</span>,<span class="string">"*.js,*.css,/druid/*"</span>);</span><br><span class="line">    bean.setInitParameters(initParams);</span><br><span class="line">    bean.setUrlPatterns(Arrays.asList(<span class="string">"/*"</span>));<span class="comment">// 拦截所有请求：</span></span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时运行主程序，访问 <a href="http://localhost:8081/druid" target="_blank" rel="noopener">http://localhost:8081/druid</a> 并用<code>ServletRegistrationBean</code>的初始化参数来登录：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-6.png" class>   
<p>随后，浏览器访问 <a href="http://localhost:8081/query" target="_blank" rel="noopener">http://localhost:8081/query</a> 进行操作数据库的请求，在<code>Web应用</code>选项下，成功用filter监控了此次请求：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-7.png" class>   
<p><code>SQL监控</code>也成功记录了此次SQL的操作记录：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-9.png" class>

<h1 id="整合MyBatis"><a href="#整合MyBatis" class="headerlink" title="整合MyBatis"></a>整合MyBatis</h1><h2 id="配置MyBatis"><a href="#配置MyBatis" class="headerlink" title="配置MyBatis"></a>配置MyBatis</h2><p>基于Spring Initializr创建项目，加入Web、JDBC、MySQL、MyBatis等依赖。   </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-10.png" class>  
<p>可以看出MyBatis的依赖不是spring boot官方出的，而是自己适配spring boot出的。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>对上述依赖右键选择<code>Diagrams</code>，可以看出mybatis的启动器引入了mybatis包、mybatis自动配置包、mybatis中间的整合包。  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-11.png" class>
<h2 id="引入druid数据源，并绑定配置"><a href="#引入druid数据源，并绑定配置" class="headerlink" title="引入druid数据源，并绑定配置"></a>引入druid数据源，并绑定配置</h2><p>新建一个数据库，名为mybatis：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-12.png" class>  
<p>在<code>application.yml</code>中写入：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="comment">#   数据源基本配置</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.1.100:3306/mybatis?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">initialization-mode:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="comment">#   数据源其他配置</span></span><br><span class="line">    <span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">minIdle:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line">    <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">    <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">poolPreparedStatements:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment">#   配置监控统计拦截的filters，去掉后监控界面sql无法统计，'wall'用于防火墙</span></span><br><span class="line">    <span class="attr">filters:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line">    <span class="attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">useGlobalDataSourceStat:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">connectionProperties:</span> <span class="string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></span><br></pre></td></tr></table></figure>
<p>在<code>/config</code>文件夹下写一个配置类<code>DruidConfig.java</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DruidConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"spring.datasource"</span>)</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">druid</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DruidDataSource();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//配置Druid的监控</span></span><br><span class="line">    <span class="comment">//1、配置一个管理后台的Servlet，访问地址localhost:8081/druid</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean <span class="title">statViewServlet</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//把StatViewServlet()注册到bean，并处理"/druid/*"的所有请求</span></span><br><span class="line">        ServletRegistrationBean bean = <span class="keyword">new</span> ServletRegistrationBean(<span class="keyword">new</span> StatViewServlet(), <span class="string">"/druid/*"</span>);</span><br><span class="line">        Map&lt;String, String&gt; initParams = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        initParams.put(<span class="string">"loginUsername"</span>,<span class="string">"admin"</span>);</span><br><span class="line">        initParams.put(<span class="string">"loginPassword"</span>,<span class="string">"123"</span>);</span><br><span class="line">        initParams.put(<span class="string">"allow"</span>,<span class="string">""</span>);<span class="comment">//默认就是允许所有访问</span></span><br><span class="line">        initParams.put(<span class="string">"deny"</span>,<span class="string">"192.168.10.100"</span>);</span><br><span class="line">        bean.setInitParameters(initParams);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2、配置一个web监控的filter，任何请求都需要通过filter实现监控，除了静态资源*.js,*.css，登录请求/druid/*</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">webStatFilter</span><span class="params">()</span></span>&#123;</span><br><span class="line">        FilterRegistrationBean bean = <span class="keyword">new</span> FilterRegistrationBean();</span><br><span class="line">        <span class="comment">// 注册WebStatFilter()实例</span></span><br><span class="line">        bean.setFilter(<span class="keyword">new</span> WebStatFilter());</span><br><span class="line">        Map&lt;String, String&gt; initParams = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">// 设置初始化参数，拦截除了"*.js,*.css,/druid/*"的所有请求</span></span><br><span class="line">        initParams.put(<span class="string">"exclusions"</span>,<span class="string">"*.js,*.css,/druid/*"</span>);</span><br><span class="line">        bean.setInitParameters(initParams);</span><br><span class="line">        bean.setUrlPatterns(Arrays.asList(<span class="string">"/*"</span>));<span class="comment">// 拦截所有请求：</span></span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在<code>pom.xml</code>引入<code>log4j</code>。<br>随后访问 <a href="http://localhost:8082/druid" target="_blank" rel="noopener">http://localhost:8082/druid</a> ，成功来到控制台页面。</p>
<h2 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h2><p>在<code>/resources</code>文件夹下新建<code>sql</code>文件夹，将<code>department.sql</code>和<code>employee.sql</code>放入，并在<code>application.yml</code>中写入：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">schema:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">classpath:sql/department.sql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">classpath:sql/employee.sql</span></span><br></pre></td></tr></table></figure>
<p>此时刷新下IDEA，启动后即可新建两个数据表。</p>
<h2 id="创建JavaBean"><a href="#创建JavaBean" class="headerlink" title="创建JavaBean"></a>创建JavaBean</h2><p>在项目文件夹下新建<code>bean</code>文件夹，新建<code>Department.java</code>类和<code>Employee.java</code>类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String departmentName;</span><br></pre></td></tr></table></figure>
<p>在<code>Employee.java</code>类中加入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Integer id;</span><br><span class="line"><span class="keyword">private</span> String lastName;</span><br><span class="line"><span class="keyword">private</span> Integer gender;</span><br><span class="line"><span class="keyword">private</span> String email;</span><br><span class="line"><span class="keyword">private</span> Integer dId;</span><br></pre></td></tr></table></figure>
<p>二者都使用<code>Alt</code>+<code>Insert</code>插入<code>setter</code>和<code>getter</code>方法。</p>
<h2 id="注解版Mybatis：执行MySQL的增删改查"><a href="#注解版Mybatis：执行MySQL的增删改查" class="headerlink" title="注解版Mybatis：执行MySQL的增删改查"></a>注解版Mybatis：执行MySQL的增删改查</h2><ul>
<li><p><strong>创建@Mapper注解的mapper接口：直接操作数据库</strong><br>在项目文件夹下新建<code>mapper</code>文件夹，新建<code>DepartmentMapper.java</code>类。<br>在<code>DepartmentMapper.java</code>类中加入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指定这是一个操作数据库的mapper</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DepartmentMapper</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">"select * from department where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Department <span class="title">getDeptById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">    <span class="meta">@Delete</span>(<span class="string">"delete from department where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">deleteDeptById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">    <span class="comment">//获取自动id：使用自动生成组件+告诉Mybatis："id"属性是用来封装组件的</span></span><br><span class="line">    <span class="meta">@Options</span>(useGeneratedKeys = <span class="keyword">true</span>, keyProperty = <span class="string">"id"</span>)</span><br><span class="line">    <span class="meta">@Insert</span>(<span class="string">"insert into department(departmentName) values(#&#123;departmentName&#125;)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">insertDept</span><span class="params">(Department department)</span></span>;</span><br><span class="line">    <span class="meta">@Update</span>(<span class="string">"update department set departmentName=#&#123;departmentName&#125; where id=#&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateDept</span><span class="params">(Department department)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>写一个controller测试</strong><br>在<code>/controller</code>文件夹下写一个<code>DeptController.java</code>，测试能否实现department的查和增：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeptController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DepartmentMapper departmentMapper;</span><br><span class="line"> <span class="comment">//以请求参数的方式返回id，随后用id执行需要的查询操作</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/dept/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Department <span class="title">getDepartment</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> departmentMapper.getDeptById(id);</span><br><span class="line">    &#125;</span><br><span class="line"> <span class="comment">//将所有请求参数封装成Department对象，随后用该对象执行需要的插入操作</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/dept"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Department <span class="title">insertDepartment</span><span class="params">(Department department)</span> </span>&#123;</span><br><span class="line">        departmentMapper.insertDept(department);</span><br><span class="line">        <span class="keyword">return</span> department;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问 <a href="http://localhost:8082/dept/1" target="_blank" rel="noopener">http://localhost:8082/dept/1</a> 。此时，查询未果，返回为空白页面：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-13.png" class>   
<p>访问 <a href="http://localhost:8082/dept?departmentName=AA" target="_blank" rel="noopener">http://localhost:8082/dept?departmentName=AA</a> 。此时插入了一个department：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-14.png" class>  
<p>查看数据库。插入成功：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-15.png" class> 
<p>访问 <a href="http://localhost:8082/dept/2" target="_blank" rel="noopener">http://localhost:8082/dept/2</a> 。此时查询到了这个department：   </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-16.png" class> 
</li>
<li><p><strong>两种开启驼峰命名法的配置</strong><br>当JavaBean中的名字（departmentName）和数据库中的名字（department_name）不一样时，便无法完成操作数据库的命令。此时需要修改配置，开启驼峰命名法。  </p>
<ul>
<li>配置文件直接配置<br>在<code>application.yml</code>中写入：<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">	  <span class="attr">configuration:</span></span><br><span class="line">    	<span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li>
<li>利用源码中的ConfigurationCustomizer进行自定义配置<br>不用配置文件的情况下开启驼峰命名法，在<code>/config</code>文件夹下写一个配置类<code>MyBatisConfig.java</code>：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@org</span>.springframework.context.annotation.Configuration</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ConfigurationCustomizer <span class="title">configurationCustomizer</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ConfigurationCustomizer()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(Configuration configuration)</span> </span>&#123;</span><br><span class="line">                configuration.setMapUnderscoreToCamelCase(<span class="keyword">true</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>使用@MapperScan批量扫描所有的Mapper接口</strong><br>若不想在每个mapper类上都标注<code>@Mapper</code>注解，只需要在主程序中用<code>@MapperScan</code>注解，便可以指定某个包下的所有接口都添加<code>@Mapper</code>注解，实现批量扫描所有的Mapper接口：  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan</span>(value = <span class="string">"com.example.springboot.mapper"</span>)</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringBoot08DataMybatisApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(SpringBoot08DataMybatisApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="配置文件版Mybatis：执行MySQL的增删改查"><a href="#配置文件版Mybatis：执行MySQL的增删改查" class="headerlink" title="配置文件版Mybatis：执行MySQL的增删改查"></a>配置文件版Mybatis：执行MySQL的增删改查</h2><ul>
<li><strong>创建无@mapper注解的mapper接口：简化mapper</strong><br>在<code>mapper</code>文件夹，新建<code>EmployeeMapper.java</code>类。<br>在<code>EmployeeMapper.java</code>类中加入：  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmployeeMapper</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Employee <span class="title">getEmpById</span><span class="params">(Integer id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertEmp</span><span class="params">(Employee employee)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><strong>mybatis全局配置文件：自定义mybatis的配置</strong><br>在<code>/resources</code>文件夹下，新建<code>/mybatis</code>文件夹，文件夹下新建全局配置文件<code>mybatis_config.xml</code>，写入的内容来源于 <a href="https://mybatis.org/mybatis-3/getting-started.html" target="_blank" rel="noopener">mybatis官方文档</a> 中的<code>Building SqlSessionFactory from XML</code>：<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  	<span class="comment">&lt;!--此处替换成自己所需的配置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"mapUnderscoreToCamelCase"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
其中，驼峰命名法的<code>name</code>参见官网 <a href="https://mybatis.org/mybatis-3/configuration.html" target="_blank" rel="noopener">mybatis官方文档</a>。</li>
<li><strong>sql映射文件：在配置文件操作数据库</strong><br>在<code>/resources/mybatis</code>文件夹下，新建<code>/mapper</code>文件夹，文件夹下新建sql映射文件<code>EmployeeMapper.xml</code>，写入的内容来源于 <a href="https://mybatis.org/mybatis-3/getting-started.html" target="_blank" rel="noopener">mybatis官方文档</a> 中的<code>Exploring Mapped SQL Statements</code>：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC <span class="string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line">        <span class="string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span><br><span class="line">&lt;mapper namespace=<span class="string">"com.example.springboot.mapper.EmployeeMapper"</span>&gt;</span><br><span class="line">    &lt;!--    <span class="function"><span class="keyword">public</span> Employee <span class="title">getEmpById</span><span class="params">(Integer id)</span></span>;--&gt;</span><br><span class="line">    &lt;select id=<span class="string">"getEmpById"</span> resultType=<span class="string">"com.example.springboot.bean.Employee"</span>&gt;</span><br><span class="line">        SELECT * FROM employee WHERE id=#&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    &lt;!--    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertEmp</span><span class="params">(Employee employee)</span></span>;--&gt;</span><br><span class="line">    &lt;insert id=<span class="string">"insertEmp"</span>&gt;</span><br><span class="line">        <span class="function">INSERT INTO <span class="title">employee</span><span class="params">(lastName,email,gender,d_id)</span> <span class="title">VALUES</span> <span class="params">(#&#123;lastName&#125;,#&#123;email&#125;,#&#123;gender&#125;,#&#123;dId&#125;)</span></span></span><br><span class="line"><span class="function">    &lt;/insert&gt;</span></span><br><span class="line"><span class="function">&lt;/mapper&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><strong>springboot配置文件：指定mybatis所有配置文件位置</strong><br>在<code>application.yml</code>中指定全局配置文件和sql映射文件的位置，由于此处指定了mybatis全局配置的位置，不能再指定mybatis的其他配置，故将之前的驼峰命名法的配置挪到<code>mybatis_config.xml</code>中。<code>application.yml</code>中写入：<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">    <span class="string">config‐location:</span> <span class="string">classpath:mybatis/mybatis_config.xml</span>  <span class="comment"># 指定全局配置文件的位置</span></span><br><span class="line">    <span class="string">mapper‐locations:</span> <span class="string">classpath:mybatis/mapper/*.xml</span>       <span class="comment"># 指定sql映射文件的位置</span></span><br></pre></td></tr></table></figure></li>
<li><strong>写一个controller测试</strong><br>在<code>/controller/DeptController.java</code>中，测试能否实现employee的查：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">EmployeeMapper employeeMapper;</span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/emp/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Employee <span class="title">getEmp</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> employeeMapper.getEmpById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
新增Employee表数据：  <img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-17.png" class>  
访问 <a href="http://localhost:8082/emp/1" target="_blank" rel="noopener">http://localhost:8082/emp/1</a> 。此时，查询到了这个employee：  <img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-18.png" class>   

</li>
</ul>
<h1 id="整合Spring-Data-JPA"><a href="#整合Spring-Data-JPA" class="headerlink" title="整合Spring Data JPA"></a>整合Spring Data JPA</h1><h2 id="配置Spring-Data-JPA"><a href="#配置Spring-Data-JPA" class="headerlink" title="配置Spring Data JPA"></a>配置Spring Data JPA</h2><p>基于Spring Initializr创建项目，加入Web、JDBC、MySQL、Spring Data JPA等依赖。  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-19.png" class>   
<p>新建一个数据库，名为mybatis：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-20.png" class>  
<p>在<code>application.yml</code>中写入：  </p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://192.168.1.100/jpa?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">initialization-mode:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure>
<h2 id="创建JavaBean，配置Bean和数据表的映射"><a href="#创建JavaBean，配置Bean和数据表的映射" class="headerlink" title="创建JavaBean，配置Bean和数据表的映射"></a>创建JavaBean，配置Bean和数据表的映射</h2><p>在项目文件夹下新建<code>/entity</code>文件夹，新建一个实体类<code>User.java</code>和数据表进行映射，并且配置好映射关系：  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用JPA注解配置映射关系</span></span><br><span class="line"><span class="meta">@Entity</span> <span class="comment">//告诉JPA这是一个实体类（和数据表映射的类）</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"tbl_user"</span>) <span class="comment">//@Table来指定和哪个数据表对应;如果省略默认表名就是user；</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span> <span class="comment">//这是一个主键</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.IDENTITY)<span class="comment">//自增主键</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"last_name"</span>,length = <span class="number">50</span>) <span class="comment">//这是和数据表对应的一个列</span></span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="meta">@Column</span> <span class="comment">//省略默认列名就是属性名</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br></pre></td></tr></table></figure>
<p>并用<code>Alt</code>+<code>Insert</code>插入<code>setter</code>和<code>getter</code>方法。</p>
<h2 id="编写一个Dao接口"><a href="#编写一个Dao接口" class="headerlink" title="编写一个Dao接口"></a>编写一个Dao接口</h2><p>在项目文件夹下新建<code>/repository</code>文件夹，<font color="#FF0000">声明（无需实现）</font>一个<code>JpaRepository</code>的接口用于操作Bean对应的数据表（Repository）：   </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//继承JpaRepository来完成对数据库的操作</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserRepository</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">User</span>,<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="基本的JPA配置"><a href="#基本的JPA配置" class="headerlink" title="基本的JPA配置"></a>基本的JPA配置</h2><p>在<code>application.yml</code>中写入：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jpa:</span></span><br><span class="line">  <span class="attr">hibernate:</span></span><br><span class="line">    <span class="comment"># 更新或者创建数据表结构</span></span><br><span class="line">    <span class="string">ddl‐auto:</span> <span class="string">update</span></span><br><span class="line">  <span class="comment"># 控制台显示SQL</span></span><br><span class="line">  <span class="string">show‐sql:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="写一个controller测试"><a href="#写一个controller测试" class="headerlink" title="写一个controller测试"></a>写一个controller测试</h2><p>在<code>/controller/UserController.java</code>中，测试能否实现User的增和查：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserRepository userRepository;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/user/&#123;id&#125;"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">getUser</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id) </span>&#123;</span><br><span class="line">        User user = userRepository.findById(id).orElse(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">insertUser</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">        User save = userRepository.save(user);</span><br><span class="line">        <span class="keyword">return</span> save;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>访问 <a href="http://localhost:8083/user/1" target="_blank" rel="noopener">http://localhost:8083/user/1</a> 。此时，查询未果，返回为空白页面：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-22.png" class>  
<p>IDEA的回显也能看到此次查询情况：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-21.png" class>  
<p>访问 <a href="http://localhost:8083/user?lastName=Tom&amp;email=hhh" target="_blank" rel="noopener">http://localhost:8083/user?lastName=Tom&amp;email=hhh</a> 。此时插入了一个user：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-23.png" class>  
<p>查看数据库。插入成功：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-24.png" class>   
<p>IDEA的回显也能看到此次插入情况：  </p>
<img src="/2020/02/28/%E3%80%90SpringBoot%E3%80%91%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE/pasted-25.png" class>   

<h1 id="推荐"><a href="#推荐" class="headerlink" title="推荐"></a>推荐</h1><p><a href="https://www.bilibili.com/video/av38657363?p=52" target="_blank" rel="noopener">B站视频</a><br><a href="https://blog.csdn.net/qq_42806915/article/details/82930958" target="_blank" rel="noopener">JDBC、JdbcTemplate、Hibernate、Mybatis、JPA、SpringDataJPA</a><br><a href="https://www.cnblogs.com/inspurhaitian/p/4647485.html" target="_blank" rel="noopener">HIBERNATE与MYBATIS的对比</a><br><a href="https://www.cnblogs.com/aeolian/p/10735122.html" target="_blank" rel="noopener">jdbc、jpa、spring data jpa、hibernate、mybatis之间的关系及区别
</a><br><a href="https://mybatis.org/mybatis-3/getting-started.html" target="_blank" rel="noopener">mybatis官方文档</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Spring-Boot/" rel="tag"># Spring Boot</a>
              <a href="/tags/Dao%E5%B1%82/" rel="tag"># Dao层</a>
              <a href="/tags/JDBC/" rel="tag"># JDBC</a>
              <a href="/tags/ORM/" rel="tag"># ORM</a>
              <a href="/tags/JPA/" rel="tag"># JPA</a>
              <a href="/tags/Hibernate/" rel="tag"># Hibernate</a>
              <a href="/tags/Mybatis/" rel="tag"># Mybatis</a>
              <a href="/tags/Spring-Boot-JPA/" rel="tag"># Spring Boot JPA</a>
              <a href="/tags/Druid/" rel="tag"># Druid</a>
              <a href="/tags/Centos/" rel="tag"># Centos</a>
              <a href="/tags/Docker/" rel="tag"># Docker</a>
              <a href="/tags/MySQL/" rel="tag"># MySQL</a>
              <a href="/tags/VirtualBox/" rel="tag"># VirtualBox</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/02/09/%E3%80%90SpringBoot%E3%80%91Web%E5%BC%80%E5%8F%91/" rel="prev" title="【SpringBoot】Web开发">
      <i class="fa fa-chevron-left"></i> 【SpringBoot】Web开发
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/04/11/%E3%80%90%E7%AE%97%E6%B3%95%E9%A2%98%E3%80%91%E8%82%A1%E7%A5%A8%E4%B9%B0%E5%8D%96/" rel="next" title="【算法题】股票买卖">
      【算法题】股票买卖 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#dao层简介"><span class="nav-number">1.</span> <span class="nav-text">dao层简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JDBC"><span class="nav-number">2.</span> <span class="nav-text">JDBC</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#配置JDBC获取数据源"><span class="nav-number">2.1.</span> <span class="nav-text">配置JDBC获取数据源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#源码：JDBC自动配置原理"><span class="nav-number">2.2.</span> <span class="nav-text">源码：JDBC自动配置原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#利用JdbcTemplate操作数据库"><span class="nav-number">2.3.</span> <span class="nav-text">利用JdbcTemplate操作数据库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#整合Druid数据源"><span class="nav-number">3.</span> <span class="nav-text">整合Druid数据源</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#导入Druid数据源"><span class="nav-number">3.1.</span> <span class="nav-text">导入Druid数据源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#绑定Druid数据源配置"><span class="nav-number">3.2.</span> <span class="nav-text">绑定Druid数据源配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置Druid的监控"><span class="nav-number">3.3.</span> <span class="nav-text">配置Druid的监控</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#整合MyBatis"><span class="nav-number">4.</span> <span class="nav-text">整合MyBatis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#配置MyBatis"><span class="nav-number">4.1.</span> <span class="nav-text">配置MyBatis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#引入druid数据源，并绑定配置"><span class="nav-number">4.2.</span> <span class="nav-text">引入druid数据源，并绑定配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建数据表"><span class="nav-number">4.3.</span> <span class="nav-text">创建数据表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建JavaBean"><span class="nav-number">4.4.</span> <span class="nav-text">创建JavaBean</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注解版Mybatis：执行MySQL的增删改查"><span class="nav-number">4.5.</span> <span class="nav-text">注解版Mybatis：执行MySQL的增删改查</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置文件版Mybatis：执行MySQL的增删改查"><span class="nav-number">4.6.</span> <span class="nav-text">配置文件版Mybatis：执行MySQL的增删改查</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#整合Spring-Data-JPA"><span class="nav-number">5.</span> <span class="nav-text">整合Spring Data JPA</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#配置Spring-Data-JPA"><span class="nav-number">5.1.</span> <span class="nav-text">配置Spring Data JPA</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建JavaBean，配置Bean和数据表的映射"><span class="nav-number">5.2.</span> <span class="nav-text">创建JavaBean，配置Bean和数据表的映射</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编写一个Dao接口"><span class="nav-number">5.3.</span> <span class="nav-text">编写一个Dao接口</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基本的JPA配置"><span class="nav-number">5.4.</span> <span class="nav-text">基本的JPA配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#写一个controller测试"><span class="nav-number">5.5.</span> <span class="nav-text">写一个controller测试</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#推荐"><span class="nav-number">6.</span> <span class="nav-text">推荐</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Xinbin Shen</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">8</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xinbin Shen</span>
</div>


<div align="center"><div style=" width:300px; border:1px solid #000; ">  <script type="text/javascript" id="clustrmaps" src="//cdn.clustrmaps.com/map_v2.js?d=9To9_PvbL2L91dodzGWnd2ywH3kwM4OuZ81rHrm-K-c&cl=ffffff&w=a"></script>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
